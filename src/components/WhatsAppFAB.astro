---
/**
 * WhatsApp Floating Action Button
 */

interface Props {
    phone?: string;
    message?: string;
}

const {
    phone = "6288231309760",
    message = "Halo, saya tertarik dengan produk partisi Pireki Asia.",
} = Astro.props;

const encodedMessage = encodeURIComponent(message);
const waLink = `https://wa.me/${phone}?text=${encodedMessage}`;
---

<div
    class="fixed bottom-4 right-4 md:bottom-8 md:right-8 z-50 flex flex-col items-end gap-2 group"
>
    <!-- Tooltip (Desktop Only or when active) -->
    <div
        class="hidden md:block bg-white text-slate-800 px-4 py-2 rounded-xl shadow-xl text-sm font-bold mb-2 mr-2 opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0 duration-300 pointer-events-none"
    >
        Butuh Bantuan? Chat Kami!
    </div>

    <!-- Main Button -->
    <a
        href={waLink}
        target="_blank"
        rel="noopener noreferrer"
        class="relative flex items-center justify-center w-14 h-14 md:w-16 md:h-16 bg-[#25D366] text-white rounded-full shadow-2xl hover:bg-[#20bd5a] transition-all hover:-translate-y-1 hover:scale-105"
        aria-label="Chat on WhatsApp"
    >
        <!-- Ping Animation -->
        <span
            class="absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75 animate-ping"
        ></span>

        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="28"
            height="28"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="relative z-10 w-7 h-7 md:w-8 md:h-8"
        >
            <path
                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"
            ></path>
        </svg>
    </a>
</div>
